const _0x2a82=['SHA224','skip-cert-verify=true,\x20ws=true,\x20ws-path=/?ed=2560,\x20ws-headers=Host:\x22','/proxyip=','subconverter','\x0a\x20\x20','443','hBytes','false','setHours','has','https://','Buffer','sent\x20socks\x20request','true','.tp','invild\x20\x20addressType\x20is\x20','value','join','isView','ADD（TLS优选域名&IP）:\x20\x0a\x20\x20','YWxsIGlu','mozilla','?sb\x0ahttps://','CFPORTS','CF-Workers-SUB','push','versions','dGVsZWdyYW0g5Lqk5rWB576kIOaKgOacr+Wkp+S9rH7lnKjnur/lj5HniYwhCmh0dHBzOi8vdC5tZS9DTUxpdXNzc3MKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCmdpdGh1YiDpobnnm67lnLDlnYAgU3RhciFTdGFyIVN0YXIhISEKaHR0cHM6Ly9naXRodWIuY29tL2NtbGl1L2VwZWl1cwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw==','%E6%89%80%E6%9C%89%E6%B5%81%E9%87%8F','invalid\x20password','update','UFJPWFlJUC50cDEuZnh4ay5kZWR5bi5pbw==','获取CSV地址时出错:','User-Agent','url','replace','ADDCSV（IPTest测速csv文件\x20限速\x20','/sendMessage?chat_id=','\x0a---------------------------------------------------------------\x0a################################################################\x0aclash-meta\x0a---------------------------------------------------------------\x0a','&insert=false&config=','https://api.telegram.org/bot','headers','SUBNAME','&path=','match','DLS','base64','SOCKS5','node:crypto','split','/socks5=','Error\x20fetching\x20content:\x20','stack','reject','dHJvamFu','array','JS_SHA256_NO_WINDOW','start','read','\x20expected:\x205','find','null','103.21.244.0/23','ADDCSV','charAt','?b64\x0ahttps://','digest','webSocketServer\x20error','indexOf','GO2SOCKS5',',\x20sni:\x20','CFCDN（访问方式）:\x20无法访问,\x20需要您设置\x20proxyIP/PROXYIP\x20！！！\x0a','error','fail\x20to\x20auth\x20socks\x20server','catch','\x22,\x20headers:\x20{Host:\x20','PASSWORD','data','arrayBuffer','object','\x0a','utf8','unsupported\x20command,\x20only\x20TCP\x20(CONNECT)\x20is\x20allowed','Mozilla/5.0\x20Chrome/90.0.4430.72','ADD','*.loadshare.org','[object\x20Array]','https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/config/ACL4SSR_Online_Mini_MultiMode.ini','set','floor','SUB','surge','hmac','concat','block',',\x20password:\x20','hostname','&proxyip=','http://ip-api.com/json/','TGID',',\x20type:\x20','/socks5://','2053','prototype','redirect','\x0aPASSWORD:\x20','#获取订阅\x20','epeius',';\x20expire=','http://','/?ed=2560','TRUE','?singbox\x0a\x0a','hex','&password=','oKeyPad','X-New-URL','createHash','input\x20is\x20invalid\x20type','readyState','searchParams','TGTOKEN','some','\x20）:\x20\x0a\x20\x20','\x0aIP:\x20','toUpperCase',';\x20total=','skip-cert-verify=true,\x20tfo=false,\x20udp-relay=false','RPROXYIP','subtle','?security=tls&sni=','?sub\x0a\x0aBase64订阅地址:\x0ahttps://','singbox','CFCDN（访问方式）:\x20Socks5\x0a\x20\x20','JS_SHA256_NO_NODE_JS','is224','URL','node','upload=','encode','undefined','remoteSocket.readable\x20is\x20closed,\x20hasIncomingData:\x20','toString','2083','TLS','104.24.0.0/14','addEventListener','ADDAPI','\x0aSUBCONFIG（订阅转换配置文件）:\x20','Host','hashed','map','getUint16','create','charCodeAt','log','inner','Surge订阅地址:\x0ahttps://','text/plain;charset=utf-8','invalid\x20addressType\x20is\x20','2087','readableStream\x20was\x20canceled,\x20due\x20to\x20','readableWebSocketStream\x20is\x20closed','\x0aSHA224:\x20','&emoji=true&list=false&tfo=false&scv=true&fdn=false&sort=false&new_name=true','call','test','hash','','Q0YtV29ya2Vycy1lcGVpdXMvY21saXU=','sing-box','\x0a域名:\x20','message','stringify','/socks://','attachment;\x20filename=','/sub?target=clash&url=','toLowerCase',',\x20ws-opts:\x20{path:\x20\x22','nekobox',';\x20download=','bytes','pathname','buffer','CSV文件缺少必需的字段','://','\x0a---------------------------------------------------------------\x0a################################################################\x0av2ray\x0a---------------------------------------------------------------\x0a','isArray','-\x20{name:\x20','pop','104.16.0.0/13','pipeTo','getTime','constructor','sharedMemory',',\x20alpn:\x20[h3],\x20skip-cert-verify:\x20true,\x20network:\x20','URL302','Kg==','byteLength','please\x20provide\x20username/password','writable','flatMap','CFCDN（访问方式）:\x20自动获取ProxyIP\x0a','0123456789abcdef','\x0aFAKEPASS:\x20','filter','172.64.0.0/14','SUBAPI','finalized','allSettled','string','random','#CF随机节点','Invalid\x20SOCKS\x20address\x20format','length','8443','getUint8','.workers.dev','text/html,application/xhtml+xml,application/xml;','setUint32','\x0a---------------------------------------------------------------\x0a################################################################\x0a','chromeBugWorkAround','proxyip=true','获取地址时出错:','statusText','body','\x0aUA:\x20','https','write',';\x20filename*=utf-8\x27\x27','tls','&allowInsecure=1&type=','padStart','141.101.64.0/19','#!MANAGED-CONFIG\x20','get','exports','status','signal','\x0a国家:\x20','\x0aASN:\x20','finalize','gzip,\x20deflate,\x20br','.xyz','trim','lastByteIndex','b64','sub','country','includes','slice','search','JS_SHA256_NO_ARRAY_BUFFER','now','?base64\x0a\x0aclash订阅地址:\x0ahttps://','socks\x20server\x20needs\x20auth','function','close','decode',',\x20server:\x20','releaseLock','from','text','SUBAPI.fxxk.dedyn.io','blocks','\x0ahttps://','CFCDN（访问方式）:\x20ProxyIP\x0a\x20\x20','&fp=randomized&type=ws&host='];const _0x4e62=function(_0x2a829e,_0x4e6270){_0x2a829e=_0x2a829e-0x0;let _0x1ff39f=_0x2a82[_0x2a829e];return _0x1ff39f;};import{connect}from'cloudflare:sockets';let password='';let proxyIP='';let socks5Address='';let addresses=[];let sub='';let subconverter=_0x4e62('0x107');let subconfig=_0x4e62('0x57');let subProtocol='https';let RproxyIP='false';let addressesapi=[];let addressescsv=[];let DLS=0x8;let FileName=_0x4e62('0x6b');let BotToken='';let ChatID='';let proxyhosts=[];let proxyhostsURL='';let go2Socks5s=['*ttvnw.net','*tapecontent.net','*cloudatacdn.com',_0x4e62('0x55')];let fakeUserID;let fakeHostName;let proxyIPs;let socks5s;let sha224Password;const expire=0xf4849500;const regex=/^(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}|\[.*\]):?(\d+)?#?(.*)?$/;let parsedSocks5Address={};let enableSocks=![];let httpsPorts=[_0x4e62('0x66'),_0x4e62('0x8f'),'2087','2096',_0x4e62('0xd7')];export default{async 'fetch'(_0x186f45,_0xf03cd9,_0x46322f){try{const _0x243d57=_0x186f45['headers'][_0x4e62('0xeb')](_0x4e62('0x21'))||_0x4e62('0x3d');const _0x501ce0=_0x243d57[_0x4e62('0xb1')]();password=_0xf03cd9[_0x4e62('0x4c')]||password;if(!password){return new Response('请设置你的PASSWORD变量，或尝试重试部署，检查变量是否生效？',{'status':0x194,'headers':{'Content-Type':'text/plain;charset=utf-8'}});}sha224Password=_0xf03cd9[_0x4e62('0x0')]||_0xf03cd9['SHA224PASS']||sha224(password);const _0x37677b=new Date();_0x37677b['setHours'](0x0,0x0,0x0,0x0);const _0x29f41b=Math['ceil'](_0x37677b[_0x4e62('0xc0')]()/0x3e8);const _0x58828d=await MD5MD5(''+password+_0x29f41b);fakeUserID=_0x58828d['slice'](0x0,0x8)+'-'+_0x58828d[_0x4e62('0xfa')](0x8,0xc)+'-'+_0x58828d[_0x4e62('0xfa')](0xc,0x10)+'-'+_0x58828d[_0x4e62('0xfa')](0x10,0x14)+'-'+_0x58828d[_0x4e62('0xfa')](0x14);fakeHostName=_0x58828d[_0x4e62('0xfa')](0x6,0x9)+'.'+_0x58828d[_0x4e62('0xfa')](0xd,0x13);proxyIP=_0xf03cd9['PROXYIP']||proxyIP;proxyIPs=await ADD(proxyIP);proxyIP=proxyIPs[Math['floor'](Math['random']()*proxyIPs['length'])];socks5Address=_0xf03cd9[_0x4e62('0x2f')]||socks5Address;socks5s=await ADD(socks5Address);socks5Address=socks5s[Math['floor'](Math['random']()*socks5s['length'])];socks5Address=socks5Address[_0x4e62('0x31')]('//')[0x1]||socks5Address;if(_0xf03cd9[_0x4e62('0x17')])httpsPorts=await ADD(_0xf03cd9['CFPORTS']);sub=_0xf03cd9[_0x4e62('0x5a')]||sub;subconverter=_0xf03cd9[_0x4e62('0xcf')]||subconverter;if(subconverter[_0x4e62('0xf9')](_0x4e62('0x6d'))){subconverter=subconverter[_0x4e62('0x31')]('//')[0x1];subProtocol='http';}else{subconverter=subconverter['split']('//')[0x1]||subconverter;}subconfig=_0xf03cd9['SUBCONFIG']||subconfig;if(socks5Address){try{parsedSocks5Address=socks5AddressParser(socks5Address);RproxyIP=_0xf03cd9['RPROXYIP']||_0x4e62('0x7');enableSocks=!![];}catch(_0x5a0a49){let _0xb5d440=_0x5a0a49;console['log'](_0xb5d440[_0x4e62('0x8e')]());RproxyIP=_0xf03cd9['RPROXYIP']||!proxyIP?_0x4e62('0xd'):'false';enableSocks=![];}}else{RproxyIP=_0xf03cd9[_0x4e62('0x80')]||!proxyIP?_0x4e62('0xd'):'false';}if(_0xf03cd9[_0x4e62('0x54')])addresses=await ADD(_0xf03cd9['ADD']);if(_0xf03cd9['ADDAPI'])addressesapi=await ADD(_0xf03cd9[_0x4e62('0x93')]);if(_0xf03cd9['ADDCSV'])addressescsv=await ADD(_0xf03cd9[_0x4e62('0x3f')]);DLS=_0xf03cd9[_0x4e62('0x2d')]||DLS;BotToken=_0xf03cd9[_0x4e62('0x79')]||BotToken;ChatID=_0xf03cd9[_0x4e62('0x63')]||ChatID;if(_0xf03cd9[_0x4e62('0x45')])go2Socks5s=await ADD(_0xf03cd9[_0x4e62('0x45')]);const _0x4adada=_0x186f45[_0x4e62('0x29')]['get']('Upgrade');const _0x4135e9=new URL(_0x186f45[_0x4e62('0x22')]);if(_0x4135e9['searchParams'][_0x4e62('0x9')](_0x4e62('0xf7'))&&_0x4135e9[_0x4e62('0x78')][_0x4e62('0xeb')](_0x4e62('0xf7'))!=='')sub=_0x4135e9['searchParams'][_0x4e62('0xeb')](_0x4e62('0xf7'));FileName=_0xf03cd9[_0x4e62('0x2a')]||FileName;if(!_0x4adada||_0x4adada!=='websocket'){switch(_0x4135e9['pathname']){case'/':if(_0xf03cd9[_0x4e62('0xc4')])return Response[_0x4e62('0x68')](_0xf03cd9[_0x4e62('0xc4')],0x12e);else if(_0xf03cd9[_0x4e62('0x88')])return await proxyURL(_0xf03cd9['URL'],_0x4135e9);else return new Response(JSON['stringify'](_0x186f45['cf'],null,0x4),{'status':0xc8,'headers':{'content-type':'application/json'}});case'/'+fakeUserID:const _0xef7462=await getTrojanConfig(password,_0x186f45['headers'][_0x4e62('0xeb')](_0x4e62('0x95')),sub,'CF-Workers-SUB',RproxyIP,_0x4135e9);return new Response(''+_0xef7462,{'status':0xc8});case'/'+password:await sendMessage(_0x4e62('0x6a')+FileName,_0x186f45['headers']['get']('CF-Connecting-IP'),'UA:\x20'+_0x243d57+_0x4e62('0xab')+_0x4135e9[_0x4e62('0x60')]+'\x0a入口:\x20'+(_0x4135e9[_0x4e62('0xb6')]+_0x4135e9['search'])+_0x4e62('0xa8'));const _0xb0db17=await getTrojanConfig(password,_0x186f45[_0x4e62('0x29')][_0x4e62('0xeb')](_0x4e62('0x95')),sub,_0x243d57,RproxyIP,_0x4135e9);const _0x28a365=Date[_0x4e62('0xfd')]();const _0x44f42b=new Date(_0x28a365);_0x44f42b[_0x4e62('0x8')](0x0,0x0,0x0,0x0);const _0x469331=Math['floor']((_0x28a365-_0x44f42b[_0x4e62('0xc0')]())/0x5265c00*0x18*0x10000000000/0x2);let _0x558e9c=_0x469331;let _0xea5cc2=_0x469331;let _0x25313c=0x18*0x10000000000;if(_0x501ce0&&(_0x501ce0[_0x4e62('0xf9')](_0x4e62('0x15'))||_0x501ce0[_0x4e62('0xf9')]('subconverter'))){return new Response(''+_0xb0db17,{'status':0xc8,'headers':{'Content-Type':_0x4e62('0x9e'),'Profile-Update-Interval':'6','Subscription-Userinfo':'upload='+_0x558e9c+_0x4e62('0xb4')+_0xea5cc2+_0x4e62('0x7e')+_0x25313c+_0x4e62('0x6c')+expire}});}else{return new Response(''+_0xb0db17,{'status':0xc8,'headers':{'Content-Disposition':_0x4e62('0xaf')+FileName+_0x4e62('0xe5')+encodeURIComponent(FileName),'Content-Type':_0x4e62('0x9e'),'Profile-Update-Interval':'6','Subscription-Userinfo':_0x4e62('0x8a')+_0x558e9c+';\x20download='+_0xea5cc2+';\x20total='+_0x25313c+';\x20expire='+expire}});}default:if(_0xf03cd9[_0x4e62('0xc4')])return Response['redirect'](_0xf03cd9['URL302'],0x12e);else if(_0xf03cd9['URL'])return await proxyURL(_0xf03cd9[_0x4e62('0x88')],_0x4135e9);else return new Response('不用怀疑！你PASSWORD就是错的！！！',{'status':0x194});}}else{proxyIP=_0x4135e9[_0x4e62('0x78')][_0x4e62('0xeb')]('proxyip')||proxyIP;if(new RegExp(_0x4e62('0x2'),'i')['test'](_0x4135e9['pathname']))proxyIP=_0x4135e9[_0x4e62('0xb6')][_0x4e62('0xb1')]()[_0x4e62('0x31')]('/proxyip=')[0x1];else if(new RegExp('/proxyip.','i')['test'](_0x4135e9[_0x4e62('0xb6')]))proxyIP='proxyip.'+_0x4135e9['pathname']['toLowerCase']()[_0x4e62('0x31')]('/proxyip.')[0x1];socks5Address=_0x4135e9[_0x4e62('0x78')]['get']('socks5')||socks5Address;if(new RegExp(_0x4e62('0x32'),'i')['test'](_0x4135e9['pathname']))socks5Address=_0x4135e9['pathname'][_0x4e62('0x31')]('5=')[0x1];else if(new RegExp(_0x4e62('0xae'),'i')['test'](_0x4135e9['pathname'])||new RegExp(_0x4e62('0x65'),'i')['test'](_0x4135e9[_0x4e62('0xb6')])){socks5Address=_0x4135e9['pathname'][_0x4e62('0x31')]('://')[0x1][_0x4e62('0x31')]('#')[0x0];if(socks5Address[_0x4e62('0xf9')]('@')){let _0x463c0f=socks5Address['split']('@')[0x0];const _0x2e3969=/^(?:[A-Z0-9+/]{4})*(?:[A-Z0-9+/]{2}==|[A-Z0-9+/]{3}=)?$/i;if(_0x2e3969[_0x4e62('0xa6')](_0x463c0f)&&!_0x463c0f[_0x4e62('0xf9')](':'))_0x463c0f=atob(_0x463c0f);socks5Address=_0x463c0f+'@'+socks5Address[_0x4e62('0x31')]('@')[0x1];}}if(socks5Address){try{parsedSocks5Address=socks5AddressParser(socks5Address);enableSocks=!![];}catch(_0x1a25fe){let _0x2a8731=_0x1a25fe;console['log'](_0x2a8731['toString']());enableSocks=![];}}else{enableSocks=![];}return await trojanOverWSHandler(_0x186f45);}}catch(_0x564dc6){let _0x4a3738=_0x564dc6;return new Response(_0x4a3738['toString']());}}};async function trojanOverWSHandler(_0x23a849){const _0x52f3c7=new WebSocketPair();const [_0x2601e8,_0x26ee03]=Object['values'](_0x52f3c7);_0x26ee03['accept']();let _0x65d08='';let _0x297699='';const _0x37dcdd=(_0x1d58aa,_0x48ad84)=>{console['log']('['+_0x65d08+':'+_0x297699+']\x20'+_0x1d58aa,_0x48ad84||'');};const _0x13f838=_0x23a849['headers'][_0x4e62('0xeb')]('sec-websocket-protocol')||'';const _0x37e084=makeReadableWebSocketStream(_0x26ee03,_0x13f838,_0x37dcdd);let _0x456db6={'value':null};let _0x420a56=null;_0x37e084[_0x4e62('0xbf')](new WritableStream({async 'write'(_0x4e697d,_0x3cccc6){if(_0x420a56){return _0x420a56(_0x4e697d);}if(_0x456db6['value']){const _0x404ee7=_0x456db6['value']['writable']['getWriter']();await _0x404ee7['write'](_0x4e697d);_0x404ee7[_0x4e62('0x104')]();return;}const {hasError,message,portRemote=0x1bb,addressRemote='',rawClientData,addressType}=await parseTrojanHeader(_0x4e697d);_0x65d08=addressRemote;_0x297699=portRemote+'--'+Math['random']()+'\x20tcp';if(hasError){throw new Error(message);return;}handleTCPOutBound(_0x456db6,addressRemote,portRemote,rawClientData,_0x26ee03,_0x37dcdd,addressType);},'close'(){_0x37dcdd(_0x4e62('0xa2'));},'abort'(_0x4c1b1b){_0x37dcdd('readableWebSocketStream\x20is\x20aborted',JSON[_0x4e62('0xad')](_0x4c1b1b));}}))[_0x4e62('0x4a')](_0x5d7ec0=>{_0x37dcdd('readableWebSocketStream\x20pipeTo\x20error',_0x5d7ec0);});return new Response(null,{'status':0x65,'webSocket':_0x2601e8});}async function parseTrojanHeader(_0xcfe4c9){if(_0xcfe4c9[_0x4e62('0xc6')]<0x38){return{'hasError':!![],'message':'invalid\x20data'};}let _0x6eb9d9=0x38;if(new Uint8Array(_0xcfe4c9['slice'](0x38,0x39))[0x0]!==0xd||new Uint8Array(_0xcfe4c9['slice'](0x39,0x3a))[0x0]!==0xa){return{'hasError':!![],'message':'invalid\x20header\x20format\x20(missing\x20CR\x20LF)'};}const _0x16129a=new TextDecoder()[_0x4e62('0x102')](_0xcfe4c9[_0x4e62('0xfa')](0x0,_0x6eb9d9));if(_0x16129a!==sha224Password){return{'hasError':!![],'message':_0x4e62('0x1d')};}const _0xd26499=_0xcfe4c9[_0x4e62('0xfa')](_0x6eb9d9+0x2);if(_0xd26499[_0x4e62('0xc6')]<0x6){return{'hasError':!![],'message':'invalid\x20SOCKS5\x20request\x20data'};}const _0x82a80=new DataView(_0xd26499);const _0x449fa6=_0x82a80['getUint8'](0x0);if(_0x449fa6!==0x1){return{'hasError':!![],'message':_0x4e62('0x52')};}const _0x45b4c6=_0x82a80[_0x4e62('0xd8')](0x1);let _0x3ef3cd=0x0;let _0x3fe15b=0x2;let _0x2123ac='';switch(_0x45b4c6){case 0x1:_0x3ef3cd=0x4;_0x2123ac=new Uint8Array(_0xd26499['slice'](_0x3fe15b,_0x3fe15b+_0x3ef3cd))['join']('.');break;case 0x3:_0x3ef3cd=new Uint8Array(_0xd26499['slice'](_0x3fe15b,_0x3fe15b+0x1))[0x0];_0x3fe15b+=0x1;_0x2123ac=new TextDecoder()['decode'](_0xd26499[_0x4e62('0xfa')](_0x3fe15b,_0x3fe15b+_0x3ef3cd));break;case 0x4:_0x3ef3cd=0x10;const _0x468c93=new DataView(_0xd26499[_0x4e62('0xfa')](_0x3fe15b,_0x3fe15b+_0x3ef3cd));const _0x41d89e=[];for(let _0x532410=0x0;_0x532410<0x8;_0x532410++){_0x41d89e[_0x4e62('0x19')](_0x468c93['getUint16'](_0x532410*0x2)['toString'](0x10));}_0x2123ac=_0x41d89e['join'](':');break;default:return{'hasError':!![],'message':_0x4e62('0x9f')+_0x45b4c6};}if(!_0x2123ac){return{'hasError':!![],'message':'address\x20is\x20empty,\x20addressType\x20is\x20'+_0x45b4c6};}const _0x1c0f74=_0x3fe15b+_0x3ef3cd;const _0x4327fb=_0xd26499[_0x4e62('0xfa')](_0x1c0f74,_0x1c0f74+0x2);const _0xfa34b3=new DataView(_0x4327fb)[_0x4e62('0x98')](0x0);return{'hasError':![],'addressRemote':_0x2123ac,'portRemote':_0xfa34b3,'rawClientData':_0xd26499[_0x4e62('0xfa')](_0x1c0f74+0x4),'addressType':_0x45b4c6};}async function handleTCPOutBound(_0x1d51f3,_0x2e6b21,_0x263c0c,_0x445eca,_0x411c6a,_0x289099,_0x1d6df9){async function _0x4dbb1a(_0x4600cb){if(go2Socks5s[_0x4e62('0xf9')](atob('YWxsIGlu'))||go2Socks5s['includes'](atob('Kg==')))return!![];return go2Socks5s[_0x4e62('0x7a')](_0x353b95=>{let _0x552b1f=_0x353b95['replace'](/\*/g,'.*');let _0xa89e2d=new RegExp('^'+_0x552b1f+'$','i');return _0xa89e2d['test'](_0x4600cb);});}async function _0x4cb725(_0x60698f,_0x2d13d2,_0xd462e6=![]){_0x289099('connected\x20to\x20'+_0x60698f+':'+_0x2d13d2);const _0x4d93c3=_0xd462e6?await socks5Connect(_0x1d6df9,_0x60698f,_0x2d13d2,_0x289099):connect({'hostname':_0x60698f,'port':_0x2d13d2});_0x1d51f3['value']=_0x4d93c3;const _0x2cca84=_0x4d93c3[_0x4e62('0xc8')]['getWriter']();await _0x2cca84[_0x4e62('0xe4')](_0x445eca);_0x2cca84[_0x4e62('0x104')]();return _0x4d93c3;}async function _0x3221f4(){if(enableSocks){_0x16b19e=await _0x4cb725(_0x2e6b21,_0x263c0c,!![]);}else{if(!proxyIP||proxyIP==''){proxyIP=atob(_0x4e62('0x1f'));}else if(proxyIP['includes'](']:')){_0x263c0c=proxyIP['split'](']:')[0x1]||_0x263c0c;proxyIP=proxyIP['split'](']:')[0x0]||proxyIP;}else if(proxyIP[_0x4e62('0x31')](':')['length']===0x2){_0x263c0c=proxyIP[_0x4e62('0x31')](':')[0x1]||_0x263c0c;proxyIP=proxyIP['split'](':')[0x0]||proxyIP;}if(proxyIP['includes'](_0x4e62('0xe')))_0x263c0c=proxyIP['split']('.tp')[0x1]['split']('.')[0x0]||_0x263c0c;_0x16b19e=await _0x4cb725(proxyIP||_0x2e6b21,_0x263c0c);}_0x16b19e['closed'][_0x4e62('0x4a')](_0x2d54b8=>{console[_0x4e62('0x9b')]('retry\x20tcpSocket\x20closed\x20error',_0x2d54b8);})['finally'](()=>{safeCloseWebSocket(_0x411c6a);});remoteSocketToWS(_0x16b19e,_0x411c6a,null,_0x289099);}let _0x44dee6=![];if(go2Socks5s['length']>0x0&&enableSocks)_0x44dee6=await _0x4dbb1a(_0x2e6b21);let _0x16b19e=await _0x4cb725(_0x2e6b21,_0x263c0c,_0x44dee6);remoteSocketToWS(_0x16b19e,_0x411c6a,_0x3221f4,_0x289099);}function makeReadableWebSocketStream(_0x39d520,_0x2b433d,_0x5bf353){let _0x2c1d5f=![];const _0x46a1f7=new ReadableStream({'start'(_0x3e67cd){_0x39d520['addEventListener'](_0x4e62('0xac'),_0x9f2c1e=>{if(_0x2c1d5f){return;}const _0x4fbfb9=_0x9f2c1e[_0x4e62('0x4d')];_0x3e67cd['enqueue'](_0x4fbfb9);});_0x39d520[_0x4e62('0x92')](_0x4e62('0x101'),()=>{safeCloseWebSocket(_0x39d520);if(_0x2c1d5f){return;}_0x3e67cd[_0x4e62('0x101')]();});_0x39d520[_0x4e62('0x92')](_0x4e62('0x48'),_0x104879=>{_0x5bf353(_0x4e62('0x43'));_0x3e67cd['error'](_0x104879);});const {earlyData,error}=base64ToArrayBuffer(_0x2b433d);if(error){_0x3e67cd['error'](error);}else if(earlyData){_0x3e67cd['enqueue'](earlyData);}},'pull'(_0x20f5e6){},'cancel'(_0x1e2f17){if(_0x2c1d5f){return;}_0x5bf353(_0x4e62('0xa1')+_0x1e2f17);_0x2c1d5f=!![];safeCloseWebSocket(_0x39d520);}});return _0x46a1f7;}async function remoteSocketToWS(_0x1468ad,_0x4e2576,_0x1823d7,_0x47ac7c){let _0x48208b=![];await _0x1468ad['readable']['pipeTo'](new WritableStream({'start'(){},async 'write'(_0x2eaad3,_0x2f6f2f){_0x48208b=!![];if(_0x4e2576[_0x4e62('0x77')]!==WS_READY_STATE_OPEN){_0x2f6f2f['error']('webSocket\x20connection\x20is\x20not\x20open');}_0x4e2576['send'](_0x2eaad3);},'close'(){_0x47ac7c(_0x4e62('0x8d')+_0x48208b);},'abort'(_0x40a2a3){console[_0x4e62('0x48')]('remoteSocket.readable\x20abort',_0x40a2a3);}}))['catch'](_0x3a6087=>{console['error']('remoteSocketToWS\x20error:',_0x3a6087[_0x4e62('0x34')]||_0x3a6087);safeCloseWebSocket(_0x4e2576);});if(_0x48208b===![]&&_0x1823d7){_0x47ac7c('retry');_0x1823d7();}}function base64ToArrayBuffer(_0x1f896f){if(!_0x1f896f){return{'error':null};}try{_0x1f896f=_0x1f896f[_0x4e62('0x23')](/-/g,'+')[_0x4e62('0x23')](/_/g,'/');const _0x1877f6=atob(_0x1f896f);const _0x10692c=Uint8Array[_0x4e62('0x105')](_0x1877f6,_0x3c96fb=>_0x3c96fb[_0x4e62('0x9a')](0x0));return{'earlyData':_0x10692c[_0x4e62('0xb7')],'error':null};}catch(_0x447047){return{'error':_0x447047};}}let WS_READY_STATE_OPEN=0x1;let WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x47aa66){try{if(_0x47aa66['readyState']===WS_READY_STATE_OPEN||_0x47aa66['readyState']===WS_READY_STATE_CLOSING){_0x47aa66['close']();}}catch(_0x2ae32f){console['error']('safeCloseWebSocket\x20error',_0x2ae32f);}}function revertFakeInfo(_0x1cb9b1,_0x8a4af9,_0x18538c,_0x1eab40){if(_0x1eab40)_0x1cb9b1=atob(_0x1cb9b1);_0x1cb9b1=_0x1cb9b1[_0x4e62('0x23')](new RegExp(fakeUserID,'g'),_0x8a4af9)['replace'](new RegExp(fakeHostName,'g'),_0x18538c);if(_0x1eab40)_0x1cb9b1=btoa(_0x1cb9b1);return _0x1cb9b1;}async function MD5MD5(_0x2ad036){const _0x3d53c8=new TextEncoder();const _0x1ee4e9=await crypto['subtle']['digest']('MD5',_0x3d53c8['encode'](_0x2ad036));const _0x308a0c=Array['from'](new Uint8Array(_0x1ee4e9));const _0x30e2f5=_0x308a0c['map'](_0x5de3b5=>_0x5de3b5['toString'](0x10)[_0x4e62('0xe8')](0x2,'0'))[_0x4e62('0x11')]('');const _0x527cad=await crypto[_0x4e62('0x81')]['digest']('MD5',_0x3d53c8['encode'](_0x30e2f5[_0x4e62('0xfa')](0x7,0x1b)));const _0x122f85=Array[_0x4e62('0x105')](new Uint8Array(_0x527cad));const _0x14a572=_0x122f85['map'](_0x273765=>_0x273765[_0x4e62('0x8e')](0x10)[_0x4e62('0xe8')](0x2,'0'))['join']('');return _0x14a572['toLowerCase']();}async function ADD(_0x39a95b){var _0x11428d=_0x39a95b['replace'](/[ |"'\r\n]+/g,',')['replace'](/,+/g,',');if(_0x11428d[_0x4e62('0x40')](0x0)==',')_0x11428d=_0x11428d[_0x4e62('0xfa')](0x1);if(_0x11428d['charAt'](_0x11428d[_0x4e62('0xd6')]-0x1)==',')_0x11428d=_0x11428d[_0x4e62('0xfa')](0x0,_0x11428d['length']-0x1);const _0x341714=_0x11428d[_0x4e62('0x31')](',');return _0x341714;}async function proxyURL(_0x456fe7,_0x418e07){const _0x307a2e=await ADD(_0x456fe7);const _0x1a3785=_0x307a2e[Math[_0x4e62('0x59')](Math['random']()*_0x307a2e['length'])];let _0x5366cf=new URL(_0x1a3785);console['log'](_0x5366cf);let _0x252307=_0x5366cf['protocol'][_0x4e62('0xfa')](0x0,-0x1)||_0x4e62('0xe3');let _0x1b0ded=_0x5366cf[_0x4e62('0x60')];let _0x5e621f=_0x5366cf[_0x4e62('0xb6')];let _0x11d1da=_0x5366cf[_0x4e62('0xfb')];if(_0x5e621f[_0x4e62('0x40')](_0x5e621f['length']-0x1)=='/'){_0x5e621f=_0x5e621f[_0x4e62('0xfa')](0x0,-0x1);}_0x5e621f+=_0x418e07[_0x4e62('0xb6')];let _0x41f71d=_0x252307+_0x4e62('0xb9')+_0x1b0ded+_0x5e621f+_0x11d1da;let _0x1bc816=await fetch(_0x41f71d);let _0x3b654f=new Response(_0x1bc816[_0x4e62('0xe1')],{'status':_0x1bc816[_0x4e62('0xed')],'statusText':_0x1bc816['statusText'],'headers':_0x1bc816['headers']});_0x3b654f[_0x4e62('0x29')][_0x4e62('0x58')](_0x4e62('0x74'),_0x41f71d);return _0x3b654f;}function 配置信息(_0x160443,_0x17e5a5){const _0x2dffe4=_0x4e62('0x36');const _0x43a915=atob(_0x2dffe4);const _0x5244a5=FileName;let _0x44f7b4=_0x17e5a5;let _0x3e437f=0x1bb;const _0x32f2dd='ws';const _0x353309=_0x17e5a5;const _0x2f43be=_0x4e62('0x6e');let _0xb99f51=[_0x4e62('0xe6'),!![]];const _0x3b92c7=_0x17e5a5;const _0x12ab20='randomized';const _0x4be429=_0x43a915+_0x4e62('0xb9')+encodeURIComponent(_0x160443)+'@'+_0x44f7b4+':'+_0x3e437f+'?security='+_0xb99f51[0x0]+'&sni='+_0x3b92c7+'&alpn=h3&fp='+_0x12ab20+_0x4e62('0xe7')+_0x32f2dd+'&host='+_0x353309+_0x4e62('0x2b')+encodeURIComponent(_0x2f43be)+'#'+encodeURIComponent(_0x5244a5);const _0x322831=_0x4e62('0xbc')+_0x5244a5+_0x4e62('0x103')+_0x44f7b4+',\x20port:\x20'+_0x3e437f+',\x20udp:\x20false,\x20client-fingerprint:\x20'+_0x12ab20+_0x4e62('0x64')+_0x43a915+_0x4e62('0x5f')+_0x160443+_0x4e62('0x46')+_0x3b92c7+_0x4e62('0xc3')+_0x32f2dd+_0x4e62('0xb2')+_0x2f43be+_0x4e62('0x4b')+_0x353309+'}}}';return[_0x4be429,_0x322831];}let subParams=['sub',_0x4e62('0x2e'),_0x4e62('0xf6'),'clash','singbox','sb','surge'];async function getTrojanConfig(_0x5233b3,_0x291eec,_0x5d8817,_0x253e16,_0x5574ea,_0x2c3f70){if(_0x5d8817){const _0x51fc61=_0x5d8817['match'](/^(?:https?:\/\/)?([^\/]+)/);if(_0x51fc61){_0x5d8817=_0x51fc61[0x1];}}else if(addresses[_0x4e62('0xd6')]+addressesapi[_0x4e62('0xd6')]+addressescsv['length']==0x0){let _0x44243b=[_0x4e62('0x3e'),_0x4e62('0xbe'),_0x4e62('0x91'),_0x4e62('0xce'),'103.21.244.0/23','104.16.0.0/14','104.24.0.0/15',_0x4e62('0xe9'),_0x4e62('0xce'),'188.114.96.0/21','190.93.240.0/21'];function _0x8699f4(_0x31bc98){const [_0x1b923a,_0x396853]=_0x31bc98[_0x4e62('0x31')]('/');const _0x2c074d=_0x1b923a['split']('.')['map'](Number);const _0x8addc4=0x20-parseInt(_0x396853,0xa);const _0x15bdba=Math['pow'](0x2,_0x8addc4)-0x1;const _0x1d078d=Math['floor'](Math['random']()*_0x15bdba);const _0x343d83=_0x2c074d['map']((_0x3b30e6,_0x30d01e)=>{if(_0x30d01e<0x2)return _0x3b30e6;if(_0x30d01e===0x2)return(_0x3b30e6&0xff<<_0x8addc4-0x8)+(_0x1d078d>>0x8&0xff);return(_0x3b30e6&0xff<<_0x8addc4)+(_0x1d078d&0xff);});return _0x343d83['join']('.');}addresses=addresses['concat']('127.0.0.1:1234#CFnat');addresses=addresses[_0x4e62('0x5d')](_0x44243b['map'](_0x512293=>_0x8699f4(_0x512293)+_0x4e62('0xd4')));}const _0x589835=_0x253e16[_0x4e62('0xb1')]();const _0x4168f3=配置信息(_0x5233b3,_0x291eec);const _0x217e55=_0x4168f3[0x0];const _0x4fbe65=_0x4168f3[0x1];let _0x2e6c02='';if(_0x291eec['includes']('.workers.dev')){if(proxyhostsURL&&(!proxyhosts||proxyhosts[_0x4e62('0xd6')]==0x0)){try{const _0x28d016=await fetch(proxyhostsURL);if(!_0x28d016['ok']){console['error']('获取地址时出错:',_0x28d016[_0x4e62('0xed')],_0x28d016[_0x4e62('0xe0')]);return;}const _0x54b02e=await _0x28d016['text']();const _0x4741a6=_0x54b02e['split']('\x0a');const _0x310698=_0x4741a6['filter'](_0x109143=>_0x109143['trim']()!=='');proxyhosts=proxyhosts['concat'](_0x310698);}catch(_0xd9d360){}}if(proxyhosts[_0x4e62('0xd6')]!=0x0)_0x2e6c02=proxyhosts[Math['floor'](Math[_0x4e62('0xd3')]()*proxyhosts[_0x4e62('0xd6')])]+'/';}if(_0x589835[_0x4e62('0xf9')]('mozilla')&&!subParams[_0x4e62('0x7a')](_0x5741b8=>_0x2c3f70[_0x4e62('0x78')][_0x4e62('0x9')](_0x5741b8))){let _0x152ba6=_0x4e62('0x9d')+_0x2e6c02+_0x291eec+'/'+_0x5233b3+'?surge';if(_0x291eec[_0x4e62('0xf9')](_0x4e62('0xd9')))_0x152ba6='Surge订阅必须绑定自定义域';const _0x4aa301=socks5s['map'](_0x36e715=>{if(_0x36e715[_0x4e62('0xf9')]('@'))return _0x36e715[_0x4e62('0x31')]('@')[0x1];else if(_0x36e715[_0x4e62('0xf9')]('//'))return _0x36e715[_0x4e62('0x31')]('//')[0x1];else return _0x36e715;});let _0xa4369f='';if(go2Socks5s[_0x4e62('0xd6')]>0x0&&enableSocks){_0xa4369f=''+decodeURIComponent('SOCKS5%EF%BC%88%E7%99%BD%E5%90%8D%E5%8D%95%EF%BC%89%3A%20');if(go2Socks5s[_0x4e62('0xf9')](atob(_0x4e62('0x14')))||go2Socks5s['includes'](atob(_0x4e62('0xc5'))))_0xa4369f+=decodeURIComponent(_0x4e62('0x1c'))+'\x0a';else _0xa4369f+=_0x4e62('0x4')+go2Socks5s[_0x4e62('0x11')](_0x4e62('0x4'))+'\x0a';}let _0x5b8225='';if(_0x5d8817){if(enableSocks)_0x5b8225+=_0x4e62('0x85')+_0x4aa301[_0x4e62('0x11')](_0x4e62('0x4'))+'\x0a'+_0xa4369f;else if(proxyIP&&proxyIP!='')_0x5b8225+='CFCDN（访问方式）:\x20ProxyIP\x0a\x20\x20'+proxyIPs[_0x4e62('0x11')]('\x0a\x20\x20')+'\x0a';else if(_0x5574ea==_0x4e62('0xd'))_0x5b8225+=_0x4e62('0xca');else _0x5b8225+=_0x4e62('0x47');_0x5b8225+='\x0aSUB（优选订阅生成器）:\x20'+_0x5d8817;}else{if(enableSocks)_0x5b8225+=_0x4e62('0x85')+_0x4aa301[_0x4e62('0x11')]('\x0a\x20\x20')+'\x0a'+_0xa4369f;else if(proxyIP&&proxyIP!='')_0x5b8225+=_0x4e62('0x10a')+proxyIPs['join'](_0x4e62('0x4'))+'\x0a';else _0x5b8225+='CFCDN（访问方式）:\x20无法访问,\x20需要您设置\x20proxyIP/PROXYIP\x20！！！\x0a';_0x5b8225+='\x0a您的订阅内容由\x20内置\x20addresses/ADD*\x20参数变量提供\x0a';if(addresses[_0x4e62('0xd6')]>0x0)_0x5b8225+=_0x4e62('0x13')+addresses[_0x4e62('0x11')]('\x0a\x20\x20')+'\x0a';if(addressesapi[_0x4e62('0xd6')]>0x0)_0x5b8225+='ADDAPI（TLS优选域名&IP\x20的\x20API）:\x20\x0a\x20\x20'+addressesapi[_0x4e62('0x11')]('\x0a\x20\x20')+'\x0a';if(addressescsv[_0x4e62('0xd6')]>0x0)_0x5b8225+=_0x4e62('0x24')+DLS+_0x4e62('0x7b')+addressescsv[_0x4e62('0x11')](_0x4e62('0x4'))+'\x0a';}return'\x0a################################################################\x0aSubscribe\x20/\x20sub\x20订阅地址,\x20支持\x20Base64、clash-meta、sing-box\x20订阅格式\x0a---------------------------------------------------------------\x0a快速自适应订阅地址:\x0ahttps://'+_0x2e6c02+_0x291eec+'/'+_0x5233b3+_0x4e62('0x109')+_0x2e6c02+_0x291eec+'/'+_0x5233b3+_0x4e62('0x83')+_0x2e6c02+_0x291eec+'/'+_0x5233b3+_0x4e62('0x41')+_0x2e6c02+_0x291eec+'/'+_0x5233b3+_0x4e62('0xfe')+_0x2e6c02+_0x291eec+'/'+_0x5233b3+'?clash\x0a\x0asingbox订阅地址:\x0ahttps://'+_0x2e6c02+_0x291eec+'/'+_0x5233b3+_0x4e62('0x16')+_0x2e6c02+_0x291eec+'/'+_0x5233b3+_0x4e62('0x70')+_0x152ba6+'\x0a---------------------------------------------------------------\x0a################################################################\x0a'+FileName+'\x20配置信息\x0a---------------------------------------------------------------\x0aHOST:\x20'+_0x291eec+_0x4e62('0x69')+_0x5233b3+_0x4e62('0xa3')+sha224Password+_0x4e62('0xcc')+fakeUserID+_0x4e62('0xe2')+_0x253e16+'\x0a\x0a'+_0x5b8225+'\x0aSUBAPI（订阅转换后端）:\x20'+subProtocol+'://'+subconverter+_0x4e62('0x94')+subconfig+_0x4e62('0xba')+_0x217e55+_0x4e62('0x26')+_0x4fbe65+_0x4e62('0xdc')+atob(_0x4e62('0x1b'))+'\x0a';}else{if(typeof fetch!=_0x4e62('0x100')){return'Error:\x20fetch\x20is\x20not\x20available\x20in\x20this\x20environment.';}if(_0x291eec[_0x4e62('0xf9')](_0x4e62('0xd9'))){fakeHostName=fakeHostName+_0x4e62('0xd9');}else{fakeHostName=fakeHostName+_0x4e62('0xf3');}let _0x19e518=_0x4e62('0xa')+_0x5d8817+'/sub?host='+fakeHostName+'&pw='+fakeUserID+_0x4e62('0x72')+(fakeUserID+atob('JmVwZWl1cz1jbWxpdSZwcm94eWlwPQ==')+_0x5574ea);let _0x329bd7=!![];let _0x2c9e17=[];let _0x4a103a=[];if(!_0x5d8817||_0x5d8817==''){if(_0x291eec['includes']('workers.dev')){if(proxyhostsURL&&(!proxyhosts||proxyhosts[_0x4e62('0xd6')]==0x0)){try{const _0x2cf5f2=await fetch(proxyhostsURL);if(!_0x2cf5f2['ok']){console['error']('获取地址时出错:',_0x2cf5f2['status'],_0x2cf5f2['statusText']);return;}const _0x27c5c8=await _0x2cf5f2['text']();const _0x395492=_0x27c5c8[_0x4e62('0x31')]('\x0a');const _0x5dd5df=_0x395492[_0x4e62('0xcd')](_0x58ff8c=>_0x58ff8c[_0x4e62('0xf4')]()!=='');proxyhosts=proxyhosts[_0x4e62('0x5d')](_0x5dd5df);}catch(_0x5984f6){console[_0x4e62('0x48')](_0x4e62('0xdf'),_0x5984f6);}}proxyhosts=[...new Set(proxyhosts)];}_0x2c9e17=await getAddressesapi(addressesapi);_0x4a103a=await getAddressescsv(_0x4e62('0x6f'));_0x19e518='https://'+_0x291eec+'/'+fakeUserID;}if(!_0x589835[_0x4e62('0xf9')](_0x4e62('0x18')[_0x4e62('0xb1')]())){if(_0x589835[_0x4e62('0xf9')]('clash')&&!_0x589835[_0x4e62('0xf9')](_0x4e62('0xb3'))||_0x2c3f70['searchParams']['has']('clash')){_0x19e518=subProtocol+'://'+subconverter+_0x4e62('0xb0')+encodeURIComponent(_0x19e518)+_0x4e62('0x27')+encodeURIComponent(subconfig)+'&emoji=true&list=false&tfo=false&scv=true&fdn=false&sort=false&new_name=true';_0x329bd7=![];}else if(_0x589835[_0x4e62('0xf9')](_0x4e62('0xaa'))||_0x589835['includes'](_0x4e62('0x84'))||_0x2c3f70['searchParams'][_0x4e62('0x9')]('singbox')||_0x2c3f70[_0x4e62('0x78')][_0x4e62('0x9')]('sb')){_0x19e518=subProtocol+_0x4e62('0xb9')+subconverter+'/sub?target=singbox&url='+encodeURIComponent(_0x19e518)+_0x4e62('0x27')+encodeURIComponent(subconfig)+_0x4e62('0xa4');_0x329bd7=![];}else if(_0x589835[_0x4e62('0xf9')]('surge')||_0x2c3f70[_0x4e62('0x78')][_0x4e62('0x9')](_0x4e62('0x5b'))){_0x19e518=subProtocol+'://'+subconverter+'/sub?target=surge&ver=4&url='+encodeURIComponent(_0x19e518)+'&insert=false&config='+encodeURIComponent(subconfig)+'&emoji=true&list=false&xudp=false&udp=false&tfo=false&expand=true&scv=true&fdn=false';_0x329bd7=![];}}try{let _0x4ed50e;if((!_0x5d8817||_0x5d8817=='')&&_0x329bd7==!![]){_0x4ed50e=await subAddresses(fakeHostName,fakeUserID,_0x589835,_0x2c9e17,_0x4a103a);}else{const _0x21000e=await fetch(_0x19e518,{'headers':{'User-Agent':atob(_0x4e62('0xa9'))}});_0x4ed50e=await _0x21000e[_0x4e62('0x106')]();}if(_0x2c3f70['pathname']=='/'+fakeUserID)return _0x4ed50e;_0x4ed50e=revertFakeInfo(_0x4ed50e,_0x5233b3,_0x291eec,_0x329bd7);if(_0x589835['includes'](_0x4e62('0x5b'))||_0x2c3f70[_0x4e62('0x78')]['has'](_0x4e62('0x5b')))_0x4ed50e=surge(_0x4ed50e,'https://'+_0x291eec+'/'+_0x5233b3+'?surge');return _0x4ed50e;}catch(_0xfab0cd){console[_0x4e62('0x48')]('Error\x20fetching\x20content:',_0xfab0cd);return _0x4e62('0x33')+_0xfab0cd[_0x4e62('0xac')];}}}async function sendMessage(_0x4a87f5,_0x116af2,_0x12cdab=''){if(BotToken!==''&&ChatID!==''){let _0x422fe4='';const _0xe8c95e=await fetch(_0x4e62('0x62')+_0x116af2+'?lang=zh-CN');if(_0xe8c95e['status']==0xc8){const _0x4a2ddf=await _0xe8c95e['json']();_0x422fe4=_0x4a87f5+_0x4e62('0x7c')+_0x116af2+_0x4e62('0xef')+_0x4a2ddf[_0x4e62('0xf8')]+'\x0a城市:\x20'+_0x4a2ddf['city']+'\x0a组织:\x20'+_0x4a2ddf['org']+_0x4e62('0xf0')+_0x4a2ddf['as']+'\x0a'+_0x12cdab;}else{_0x422fe4=_0x4a87f5+_0x4e62('0x7c')+_0x116af2+_0x4e62('0x50')+_0x12cdab;}let _0x41f26a=_0x4e62('0x28')+BotToken+_0x4e62('0x25')+ChatID+'&parse_mode=HTML&text='+encodeURIComponent(_0x422fe4);return fetch(_0x41f26a,{'method':'get','headers':{'Accept':_0x4e62('0xda'),'Accept-Encoding':_0x4e62('0xf2'),'User-Agent':_0x4e62('0x53')}});}}async function socks5Connect(_0x32cc0,_0x589d15,_0x4aa87d,_0x5765f6){const {username,password,hostname,port}=parsedSocks5Address;const _0x3c1c5a=connect({'hostname':hostname,'port':port});const _0x4ce1f2=new Uint8Array([0x5,0x2,0x0,0x2]);const _0x233e0e=_0x3c1c5a[_0x4e62('0xc8')]['getWriter']();await _0x233e0e['write'](_0x4ce1f2);_0x5765f6('sent\x20socks\x20greeting');const _0x37d447=_0x3c1c5a['readable']['getReader']();const _0x3a1045=new TextEncoder();let _0x47dd76=(await _0x37d447[_0x4e62('0x3a')]())[_0x4e62('0x10')];if(_0x47dd76[0x0]!==0x5){_0x5765f6('socks\x20server\x20version\x20error:\x20'+_0x47dd76[0x0]+_0x4e62('0x3b'));return;}if(_0x47dd76[0x1]===0xff){_0x5765f6('no\x20acceptable\x20methods');return;}if(_0x47dd76[0x1]===0x2){_0x5765f6(_0x4e62('0xff'));if(!username||!password){_0x5765f6(_0x4e62('0xc7'));return;}const _0x771bc9=new Uint8Array([0x1,username['length'],..._0x3a1045[_0x4e62('0x8b')](username),password['length'],..._0x3a1045[_0x4e62('0x8b')](password)]);await _0x233e0e[_0x4e62('0xe4')](_0x771bc9);_0x47dd76=(await _0x37d447[_0x4e62('0x3a')]())['value'];if(_0x47dd76[0x0]!==0x1||_0x47dd76[0x1]!==0x0){_0x5765f6(_0x4e62('0x49'));return;}}let _0x357675;switch(_0x32cc0){case 0x1:_0x357675=new Uint8Array([0x1,..._0x589d15['split']('.')['map'](Number)]);break;case 0x3:_0x357675=new Uint8Array([0x3,_0x589d15[_0x4e62('0xd6')],..._0x3a1045[_0x4e62('0x8b')](_0x589d15)]);break;case 0x4:_0x357675=new Uint8Array([0x4,..._0x589d15['split'](':')[_0x4e62('0xc9')](_0xed48cb=>[parseInt(_0xed48cb['slice'](0x0,0x2),0x10),parseInt(_0xed48cb['slice'](0x2),0x10)])]);break;default:_0x5765f6(_0x4e62('0xf')+_0x32cc0);return;}const _0x4297bb=new Uint8Array([0x5,0x1,0x0,..._0x357675,_0x4aa87d>>0x8,_0x4aa87d&0xff]);await _0x233e0e['write'](_0x4297bb);_0x5765f6(_0x4e62('0xc'));_0x47dd76=(await _0x37d447['read']())[_0x4e62('0x10')];if(_0x47dd76[0x1]===0x0){_0x5765f6('socks\x20connection\x20opened');}else{_0x5765f6('fail\x20to\x20open\x20socks\x20connection');return;}_0x233e0e['releaseLock']();_0x37d447[_0x4e62('0x104')]();return _0x3c1c5a;}function socks5AddressParser(_0x2017e4){let [_0xfcaedf,_0x3a96fb]=_0x2017e4['split']('@')['reverse']();let _0x5d8f82,_0x117937,_0x151c10,_0x300ccf;if(_0x3a96fb){const _0xfb9fda=_0x3a96fb['split'](':');if(_0xfb9fda['length']!==0x2){throw new Error('Invalid\x20SOCKS\x20address\x20format');}[_0x5d8f82,_0x117937]=_0xfb9fda;}const _0x438534=_0xfcaedf['split'](':');_0x300ccf=Number(_0x438534[_0x4e62('0xbd')]());if(isNaN(_0x300ccf)){throw new Error(_0x4e62('0xd5'));}_0x151c10=_0x438534[_0x4e62('0x11')](':');const _0x2c82c1=/^\[.*\]$/;if(_0x151c10[_0x4e62('0xf9')](':')&&!_0x2c82c1['test'](_0x151c10)){throw new Error('Invalid\x20SOCKS\x20address\x20format');}return{'username':_0x5d8f82,'password':_0x117937,'hostname':_0x151c10,'port':_0x300ccf};}function isValidIPv4(_0x4f2dfc){const _0x5a0205=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;return _0x5a0205['test'](_0x4f2dfc);}let proxyIPPool=[];function subAddresses(_0x4614d1,_0x55cd1a,_0x5174f4,_0x50fbf2,_0x171297){addresses=addresses['concat'](_0x50fbf2);addresses=addresses[_0x4e62('0x5d')](_0x171297);const _0x1b05b0=[...new Set(addresses)];const _0xa3fa48=_0x1b05b0['map'](_0x405587=>{let _0x5aff5d='-1';let _0x205082=_0x405587;const _0x43beeb=_0x205082[_0x4e62('0x2c')](regex);if(!_0x43beeb){if(_0x405587['includes'](':')&&_0x405587[_0x4e62('0xf9')]('#')){const _0x52c2ef=_0x405587[_0x4e62('0x31')](':');_0x405587=_0x52c2ef[0x0];const _0x39b0ad=_0x52c2ef[0x1][_0x4e62('0x31')]('#');_0x5aff5d=_0x39b0ad[0x0];_0x205082=_0x39b0ad[0x1];}else if(_0x405587['includes'](':')){const _0x319ad3=_0x405587[_0x4e62('0x31')](':');_0x405587=_0x319ad3[0x0];_0x5aff5d=_0x319ad3[0x1];}else if(_0x405587[_0x4e62('0xf9')]('#')){const _0x34bb9b=_0x405587['split']('#');_0x405587=_0x34bb9b[0x0];_0x205082=_0x34bb9b[0x1];}if(_0x205082['includes'](':')){_0x205082=_0x205082[_0x4e62('0x31')](':')[0x0];}}else{_0x405587=_0x43beeb[0x1];_0x5aff5d=_0x43beeb[0x2]||_0x5aff5d;_0x205082=_0x43beeb[0x3]||_0x405587;}const _0x29b294=[_0x4e62('0x66'),_0x4e62('0x8f'),_0x4e62('0xa0'),'2096','8443'];if(!isValidIPv4(_0x405587)&&_0x5aff5d=='-1'){for(let _0x5a24da of _0x29b294){if(_0x405587[_0x4e62('0xf9')](_0x5a24da)){_0x5aff5d=_0x5a24da;break;}}}if(_0x5aff5d=='-1')_0x5aff5d=_0x4e62('0x5');let _0x21b182=_0x4614d1;let _0x1c7f00='/?ed=2560';let _0x390499='';if(proxyhosts['length']>0x0&&_0x21b182[_0x4e62('0xf9')](_0x4e62('0xd9'))){_0x1c7f00='/'+_0x21b182+_0x1c7f00;_0x21b182=proxyhosts[Math[_0x4e62('0x59')](Math[_0x4e62('0xd3')]()*proxyhosts['length'])];_0x390499='\x20已启用临时域名中转服务，请尽快绑定自定义域！';}const _0x32baf9=proxyIPPool[_0x4e62('0x3c')](_0x584a3c=>_0x584a3c[_0x4e62('0xf9')](_0x405587));if(_0x32baf9)_0x1c7f00+=_0x4e62('0x61')+_0x32baf9;let _0x49231f=_0x55cd1a;if(!_0x5174f4['includes'](_0x4e62('0x3')))_0x49231f=encodeURIComponent(_0x55cd1a);const _0x345fe9='dHJvamFu';const _0x36a980=atob(_0x345fe9);const _0xd42782=_0x36a980+'://'+_0x49231f+'@'+_0x405587+':'+_0x5aff5d+_0x4e62('0x82')+_0x21b182+_0x4e62('0x10b')+_0x21b182+'&path='+encodeURIComponent(_0x1c7f00)+'#'+encodeURIComponent(_0x205082+_0x390499);return _0xd42782;})['join']('\x0a');const _0x1a66d3=btoa(_0xa3fa48);return _0x1a66d3;}async function getAddressesapi(_0x343548){if(!_0x343548||_0x343548[_0x4e62('0xd6')]===0x0)return[];let _0x13f614='';const _0x46a0fc=new AbortController();const _0x17f95c=setTimeout(()=>{_0x46a0fc['abort']();},0x7d0);try{const _0x2f2c28=await Promise[_0x4e62('0xd1')](_0x343548[_0x4e62('0x97')](_0x480350=>fetch(_0x480350,{'method':_0x4e62('0xeb'),'headers':{'Accept':'text/html,application/xhtml+xml,application/xml;','User-Agent':atob('Q0YtV29ya2Vycy1lcGVpdXMvY21saXU=')},'signal':_0x46a0fc[_0x4e62('0xee')]})['then'](_0x20be32=>_0x20be32['ok']?_0x20be32[_0x4e62('0x106')]():Promise[_0x4e62('0x35')]())));for(const [_0x5452d9,_0x96904e]of _0x2f2c28['entries']()){if(_0x96904e['status']==='fulfilled'){const _0x561a14=await _0x96904e['value'];if(_0x343548[_0x5452d9][_0x4e62('0xf9')](_0x4e62('0xde'))){proxyIPPool=proxyIPPool[_0x4e62('0x5d')]((await ADD(_0x561a14))[_0x4e62('0x97')](_0x200e82=>{const _0x4007a8=_0x200e82[_0x4e62('0x31')]('#')[0x0]||_0x200e82;if(_0x4007a8[_0x4e62('0xf9')](':')){const _0x577216=_0x4007a8[_0x4e62('0x31')](':')[0x1];if(!httpsPorts[_0x4e62('0xf9')](_0x577216)){return _0x4007a8;}}else{return _0x4007a8+':443';}return null;})['filter'](Boolean));}_0x13f614+=_0x561a14+'\x0a';}}}catch(_0x48ccaa){console['error'](_0x48ccaa);}finally{clearTimeout(_0x17f95c);}const _0x7a8301=await ADD(_0x13f614);return _0x7a8301;}async function getAddressescsv(_0x352883){if(!addressescsv||addressescsv['length']===0x0){return[];}let _0x4ebe32=[];for(const _0x359287 of addressescsv){try{const _0x2cc36c=await fetch(_0x359287);if(!_0x2cc36c['ok']){console[_0x4e62('0x48')](_0x4e62('0x20'),_0x2cc36c['status'],_0x2cc36c[_0x4e62('0xe0')]);continue;}const _0x4e6c20=await _0x2cc36c[_0x4e62('0x106')]();let _0x387f2c;if(_0x4e6c20['includes']('\x0d\x0a')){_0x387f2c=_0x4e6c20[_0x4e62('0x31')]('\x0d\x0a');}else{_0x387f2c=_0x4e6c20[_0x4e62('0x31')]('\x0a');}const _0x1a3080=_0x387f2c[0x0]['split'](',');const _0x5d6442=_0x1a3080[_0x4e62('0x44')](_0x4e62('0x90'));const _0x301644=0x0;const _0x10e790=0x1;const _0xe3e33f=_0x5d6442+0x1;if(_0x5d6442===-0x1){console[_0x4e62('0x48')](_0x4e62('0xb8'));continue;}for(let _0x5d3ec4=0x1;_0x5d3ec4<_0x387f2c[_0x4e62('0xd6')];_0x5d3ec4++){const _0x37212f=_0x387f2c[_0x5d3ec4]['split'](',');const _0x2c4cb3=_0x37212f['length']-0x1;if(_0x37212f[_0x5d6442]['toUpperCase']()===_0x352883&&parseFloat(_0x37212f[_0x2c4cb3])>DLS){const _0x2e50a1=_0x37212f[_0x301644];const _0x51cd78=_0x37212f[_0x10e790];const _0x3c2dff=_0x37212f[_0xe3e33f];const _0xed4e73=_0x2e50a1+':'+_0x51cd78+'#'+_0x3c2dff;_0x4ebe32[_0x4e62('0x19')](_0xed4e73);if(_0x359287[_0x4e62('0xf9')]('proxyip=true')&&_0x37212f[_0x5d6442][_0x4e62('0x7d')]()==_0x4e62('0xd')&&!httpsPorts['includes'](_0x51cd78)){proxyIPPool['push'](_0x2e50a1+':'+_0x51cd78);}}}}catch(_0x57653b){console[_0x4e62('0x48')](_0x4e62('0x20'),_0x57653b);continue;}}return _0x4ebe32;}function surge(_0x1cc791,_0xdce5d0){let _0x346b74;if(_0x1cc791[_0x4e62('0xf9')]('\x0d\x0a')){_0x346b74=_0x1cc791['split']('\x0d\x0a');}else{_0x346b74=_0x1cc791['split']('\x0a');}let _0x4cc049='';for(let _0x5a3ddc of _0x346b74){if(_0x5a3ddc['includes']('=\x20trojan,')){const _0x4adfcd=_0x5a3ddc[_0x4e62('0x31')]('sni=')[0x1][_0x4e62('0x31')](',')[0x0];const _0x3e87de=_0x4e62('0x7f');const _0x2182d2=_0x4e62('0x1')+_0x4adfcd+'\x22,\x20tfo=false,\x20udp-relay=false';_0x4cc049+=_0x5a3ddc['replace'](new RegExp(_0x3e87de,'g'),_0x2182d2)['replace']('[','')['replace'](']','')+'\x0a';}else{_0x4cc049+=_0x5a3ddc+'\x0a';}}_0x4cc049=_0x4e62('0xea')+_0xdce5d0+'\x20interval=86400\x20strict=false'+_0x4cc049['substring'](_0x4cc049['indexOf']('\x0a'));return _0x4cc049;}/**
